<!-- HTML -->
<div>
  <h1 id="status"></h1>
  <input type="button" value="Call" id="button-call" />
</div>

<!-- JavaScript -->
<script type="text/javascript">
  const RESOURCE_POOL_ID = 'ZFuqzUDe1LkQoYbKJwYU';

  // Button event listener
  const buttonCall = document.querySelector('#button-call');
  buttonCall.addEventListener('click', () => {
    // Check if this device is using Connect
    if (typeof connect !== "undefined") {
      connect.call(RESOURCE_POOL_ID);
    } else {
      alert("Sorry, this will only work on Connect");
    }
  });

  // Status listener
  function onStatusChange(availableMembers) {
    let status = document.querySelector('#status');
    if (availableMembers > 0) {
      status.innerHTML = `Available (${availableMembers})`;
    } else {
      status.innerHTML = 'Unavailable';
    }
  }

  window.onload = function() {
    if (typeof connect !== "undefined") {
      // Register status listener
      connect.addStatusListener('onStatusChange', RESOURCE_POOL_ID);
    }
  };
</script> 
